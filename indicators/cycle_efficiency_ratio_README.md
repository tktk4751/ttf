# サイクル効率比（Cycle Efficiency Ratio）

## 概要

サイクル効率比（CER）は、価格変動の効率性を測定するインジケーターである効率比（ER）を拡張したものです。通常の効率比が固定期間を使用するのに対し、CERはEhlersDuDiDCE（エーラーズの拡張二重微分アルゴリズム）によって検出された動的なサイクル期間を使用します。

これにより、現在の市場サイクルに適応した効率性の測定が可能となり、より正確にトレンドとレンジを識別できます。

## 特徴

- **動的な期間適応**: 固定期間ではなく、市場の現在のサイクル周期に基づいて効率比を計算
- **トレンド/レンジの高精度識別**: 市場の周期性を考慮した効率性の測定により、より正確な市場状態の識別
- **ノイズフィルタリング**: バンドパスフィルターによるノイズ除去と周期検出の精度向上

## 動作原理

1. EhlersDuDiDCEアルゴリズムを使用して各時点でのドミナントサイクル期間を検出
2. 検出されたサイクル期間を使用して、各時点で効率比を計算
3. 効率比の計算式: `|価格変化| / 価格変動の合計`

## パラメーター

- **lp_period**: ローパスフィルターの期間（デフォルト: 10）
- **hp_period**: ハイパスフィルターの期間（デフォルト: 48）
- **cycle_part**: サイクル部分の倍率（デフォルト: 0.5）
- **max_output**: 最大出力値（デフォルト: 34）
- **min_output**: 最小出力値（デフォルト: 1）

## 解釈方法

- **0.618以上**: 効率的な価格変動、強いトレンドの存在を示唆
- **0.382〜0.618**: 中間的な効率性、弱いトレンドまたは遷移状態
- **0.382以下**: 非効率な価格変動、レンジ相場やノイズの多い状態を示唆

## 使用例

```python
from indicators import CycleEfficiencyRatio

# インジケーターの初期化
cycle_er = CycleEfficiencyRatio(
    lp_period=10,     # ローパスフィルター期間
    hp_period=48,     # ハイパスフィルター期間
    cycle_part=0.5,   # サイクル倍率
    max_output=34,    # 最大出力値
    min_output=1      # 最小出力値
)

# データに適用
result = cycle_er.calculate(price_data)

# サイクル期間の取得
cycles = cycle_er.get_cycles()
```

## トレード戦略への応用

1. **トレンドフォロー戦略**: CER > 0.618の場合、トレンド方向へのエントリーを検討
2. **レンジ戦略**: CER < 0.382の場合、レンジトレード（オーバーボート/オーバーソールドからの反転）を検討
3. **トレンド転換検出**: CERが0.382から0.618を上抜けた場合、新しいトレンドの始まりを示唆
4. **フィルター**: 他のインジケーターと組み合わせて、市場状態に応じたフィルターとして使用

## 他のインジケーターとの比較

- **標準効率比（ER）**: 固定期間を使用するため、異なる市場状況に適応できない
- **ADX**: トレンドの強さを測定するが、サイクル性を考慮しない
- **チョッピネスインデックス**: レンジ市場の識別に焦点を当てている

## 制限事項

- サイクル検出の精度はパラメーター設定に依存
- 急激な市場変化時には、サイクル適応に遅れが生じる可能性がある
- 非常に短期間の変動には反応しにくい場合がある

## まとめ

サイクル効率比（CER）は、エーラーズのドミナントサイクル検出技術と効率比の概念を組み合わせた高度なインジケーターです。市場のサイクル性を考慮することで、より精度の高い市場状態の識別が可能となり、適応型のトレード戦略の構築に役立ちます。 